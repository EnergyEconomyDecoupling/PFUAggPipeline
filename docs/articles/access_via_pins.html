<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="PFUAggDatabase">
<title>Access PFU Database Products Via `Pins` • PFUAggDatabase</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Access PFU Database Products Via `Pins`">
<meta property="og:description" content="PFUAggDatabase">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PFUAggDatabase</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/access_via_pins.html">Access PFU Database Products Via `Pins`</a>
    <a class="dropdown-item" href="../articles/efficiency_graph_example.html">Efficiency graph example</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Access PFU Database Products Via `Pins`</h1>
                        <h4 data-toc-skip class="author">Matthew Kuperus
Heun</h4>
            
            <h4 data-toc-skip class="date">2023-08-19</h4>
      
      
      <div class="d-none name"><code>access_via_pins.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates how to use the <code>pins</code> package
to access products in the PFU database.</p>
</div>
<div class="section level2">
<h2 id="preparation">Preparation<a class="anchor" aria-label="anchor" href="#preparation"></a>
</h2>
<p>Take the following steps to prepare for accessing PFU Database
products.</p>
<div class="section level3">
<h3 id="obtain-access-to-iea-weeb-data">(1) Obtain Access to IEA WEEB Data<a class="anchor" aria-label="anchor" href="#obtain-access-to-iea-weeb-data"></a>
</h3>
<p>The PFU database contains <a href="https://www.iea.org/data-and-statistics/data-product/world-energy-balances#energy-balances" class="external-link">World
Extended Energy Balance</a> (WEEB) data. To use the PFU Database, you or
your institution must already have purchased the WEEB data, obtained a
license to use the WEEB data, or subscribed to a data service with
access to the WEEB data. At present, you must have access to all
countries and all years of WEEB data to access the PFU Database.</p>
</div>
<div class="section level3">
<h3 id="install-dropbox">(2) Install Dropbox<a class="anchor" aria-label="anchor" href="#install-dropbox"></a>
</h3>
<p>At present, the PFU Database is distributed via a shared Dropbox
folder; thus, users of the database must install Dropbox. At present
(May 2023), data in the Dropbox folder are 12 GB. The database will grow
in size in the future. You may need to upgrade your <a href="https://www.dropbox.com/products?source=plans" class="external-link">Dropbox plan</a> if
that amount of data will cause you to exceed your current storage
limit.</p>
</div>
<div class="section level3">
<h3 id="receive-and-accept-an-invitation">(3) Receive and accept an invitation<a class="anchor" aria-label="anchor" href="#receive-and-accept-an-invitation"></a>
</h3>
<p>A member of the PFU Database team will provide read-only access to
the Dropbox folder in which the PFU Database products are stored. Accept
the invitation and let Dropbox sync the PFU Database folder to your
computer.</p>
<p>The folder containing PFU Database products is called
<code>PipelineReleases</code>.</p>
</div>
<div class="section level3">
<h3 id="become-familiar-with-the-pins-package">(4) Become familiar with the <code>pins</code> package<a class="anchor" aria-label="anchor" href="#become-familiar-with-the-pins-package"></a>
</h3>
<p>The <a href="https://pins.rstudio.com" class="external-link">pins</a> package is the
mechanism by which versions of the PFU Database and its products are
stored, maintained, and distributed. Please review the <code>pins</code>
package before accessing the PFU database data.</p>
</div>
<div class="section level3">
<h3 id="become-familiar-with-the-pfu-database-and-products">(5) Become familiar with the PFU Database and products<a class="anchor" aria-label="anchor" href="#become-familiar-with-the-pfu-database-and-products"></a>
</h3>
<p>Strictly speaking, the PFU Database consists of only primary, final,
and useful energy and exergy data for all countries and all years
available in the IEA WEEB data. The data are arranged in Physical Supply
Use Table (PSUT) format as described in the paper by <a href="https://doi.org/10.1016/j.apenergy.2018.05.109" class="external-link">Heun et al.</a>
entitled “A physical supply-use table framework for energy analysis on
the energy conversion chain.” The data are stored in the Dropbox folder
as <code>.rds</code> files in <a href="https://cran.r-project.org/web/packages/matsindf/index.html" class="external-link">matsindf</a>
format.</p>
<p>In addition to the database itself, there are several data products
available, most of which are aggregations, subsets, or other
calculations made from the database. For example, primary, final, and
useful energy and exergy aggregations are available for each country and
each year (data product C). Primary-to-final, final-to-useful, and
primary-to-final efficiencies are also available for each country and
each year (data product D).</p>
<p>The database, its versions, and its data products are documented in
the file named <code>versions and products.xlsx</code> at the top level
of the <code>PipelineReleases</code> folder. Look through that file to
determine which PFU Database products are needed for your research. In
particular, note the “Pin name” and the “Pin version” of the data
products that you desire.</p>
<p>Note: there may be other versions of pins in the Dropbox folder.
Ignore all versions of pins except those identified in the
<code>versions and products.xlsx</code> file.</p>
</div>
</div>
<div class="section level2">
<h2 id="accessing-the-pfu-database-and-other-data-products">Accessing the PFU Database and other data products<a class="anchor" aria-label="anchor" href="#accessing-the-pfu-database-and-other-data-products"></a>
</h2>
<p>To load the PFU Database itself into your <code>R</code> session,
supply the pin name and pin version to <code>pins</code> functions. The
following code loads v1 of the database itself, using the name of the
pin (“psut”) and the version string for version 1 of the database
(“20221109T152414Z-7d7ad”).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pins.rstudio.com/" class="external-link">pins</a></span><span class="op">)</span></span>
<span><span class="va">pfu_pinboard</span> <span class="op">&lt;-</span> <span class="fu">pins</span><span class="fu">::</span><span class="fu"><a href="https://pins.rstudio.com/reference/board_folder.html" class="external-link">board_folder</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"~/Dropbox/PipelineReleases"</span>, versioned <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">psut_data_frame</span> <span class="op">&lt;-</span> <span class="fu">pins</span><span class="fu">::</span><span class="fu"><a href="https://pins.rstudio.com/reference/pin_read.html" class="external-link">pin_read</a></span><span class="op">(</span>board <span class="op">=</span> <span class="va">pfu_pinboard</span>, name <span class="op">=</span> <span class="st">"psut"</span>, </span>
<span>                                  version <span class="op">=</span> <span class="st">"20221109T152414Z-7d7ad"</span><span class="op">)</span></span></code></pre></div>
<p>Because the database contains a large amount of data, it may take a
minute or two to load.</p>
<p>Although we recommend against it, you may load the <em>latest</em>
version of the same pin by not specifying the version string.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">psut_data_frame_latest</span> <span class="op">&lt;-</span> <span class="fu">pins</span><span class="fu">::</span><span class="fu"><a href="https://pins.rstudio.com/reference/pin_read.html" class="external-link">pin_read</a></span><span class="op">(</span>board <span class="op">=</span> <span class="va">pfu_pinboard</span>, name <span class="op">=</span> <span class="st">"psut"</span><span class="op">)</span></span></code></pre></div>
<p>The procedure is the same to load any data product in the database.
For example, data product <strong>A</strong> is a subset of the database
that contains “USA” only. Product A may be useful for testing, because
it is much smaller in memory than the full database and loads much
faster. To load product A for version 1 of the database, use the
following code.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">psut_data_frame_usa</span> <span class="op">&lt;-</span> <span class="fu">pins</span><span class="fu">::</span><span class="fu"><a href="https://pins.rstudio.com/reference/pin_read.html" class="external-link">pin_read</a></span><span class="op">(</span>board <span class="op">=</span> <span class="va">pfu_pinboard</span>, name <span class="op">=</span> <span class="st">"psut_usa"</span>, </span>
<span>                                      version <span class="op">=</span> <span class="st">"20230217T182459Z-287a0"</span><span class="op">)</span></span></code></pre></div>
<p>To select only a single country of data, use the following code.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">col_only</span> <span class="op">&lt;-</span> <span class="va">psut_data_frame</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Country</span> <span class="op">==</span> <span class="st">"COL"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="questions">Questions<a class="anchor" aria-label="anchor" href="#questions"></a>
</h2>
<p>Please reach out to a member of the PFU Database team with
questions.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
